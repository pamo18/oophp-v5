---
---
Redovisning kmom04
=========================

Kmom04 inom kursen oophp handlar om Trait och Interface, där jag har flyttat ut koden från mitt Dice100 spel till en kontroller och byggt ut den med ett histogram som visar statistik för varje tärningskast vilket också används för att datorn ska kunna följa en strategi på sin tur.

Med Trait och Interface kan man garantera specifikt funktionalitet genom att lägga på nödvändiga funktioner som returnerar specifika värden som i sin tur används av tex. ett histogram.  Ett interface lovar att specifika funktioner ska finnas med och dessa specifika funktioner följer med när man använder(uses) den tillhörande Trait.  En Trait och Interface kan man skapa för många olika klasser genom att bygga allmän funktionalitet som inte är klass specifikt, som tex. ett histogram som tar emot enkla värden och presentera statistik om dessa värden både visuellt och i form av kalkylationer.  Jag känner att Trait och Interface har sin användning och jag kommer definitivt att hitta användningsområden för detta framöver.

Jag har inte jobbat med en kontroller tidigare men kan definitivt förstå fördelarna.  Jag har nu flyttat ut koden från mina routes och lagt dessa i en kontroller klass, vilket omedelbart levererar en bättre kodstruktur som är både lättare att läsa och utveckla inom.  Jag hade redan under kmom03 använt mig av ramverkets klasser för att få tillgång till de globala GET, POST och SESSION variabler så själva jobbet var inte så krångligt.  Att använda en kontroller ihop med ramverkets klasser för åtkomst till dessa systemvariabler resulterar i kod som kan testas ordentligt genom att mocka miljön den kommer att användas inom, en stor fördel när man testar stabiliteten av ett program.

Mitt histogram lagrar alla tärningskast värden och används för att kalkylera ett genomsnitt tärningskastvärde, antal tärningar kastade och en visuell textsträng som visar alla tärningsvärden ihop med antal gånger de har blivit kastade.  Både användare och datorn har tillgång till dessa statistiker, som också visas på spelsidan.  Datorn använder statistiken för sin spelstrategi, ihop med lite slumpmässiga bestämmelser.  Spelstrategin är att när antalet tärningar kastat är 4st eller mer och den genomsnittligt tärningskast värdet är 3 eller mer så är datorn nöjd och slutar kastar.  Om detta krav inte är uppnådd så finns det ett slumpmässigt värde som bestämmer om datorn ska sluta kasta och stämmer inte detta så kastas datorn igen.  Det är en strategi som kan användas och fungerar väl.  Huvudsakligen så används histogrammets statistik för att hjälpa datorn bestämma.

Att integrera hårdare i ramverkets klasser kändes först utmanande men till slut både intressant, funktionellt och glädjande, att kunna jobba och utveckla i ett ramverk med många olika områden och mycket inbyggd funktionalitet känns väldigt bar att kunna klarar av.

Jag har uppnått 100% kodtäckning i make test med phpunit testning.  Jag hade redan 100% från kmom03 så hade en bra bas att bygga på med några små ändringar som behövdes för att täcka in allt med histogrammet samt lite små ändringar till kodstrukturen i klasserna.  Däremot var det en utmaning att testa kontroller klassen, som jag till slut lyckades med.  Jag vill gärna lära mig genom att testa själv och försökte på egen hand klara av detta, där jag kom nära men behövde till slut lite hjälp från en Video där Mikael Roos förklarar processen.  Nu kan jag starta upp och jobba med ramverkets egna klasser för att starta igång en session, skicka egna post värden osv för att skapa en testmiljö för min kontroller klass.

Min TIL för detta kursmoment är hur man kan använda en kontroller klass för att skapa en bättre, mer funktionellt, mer testbar samt lättläst kodstruktur.
